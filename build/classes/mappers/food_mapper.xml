<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="foodMapper">

	<resultMap id="foodResultSet" type="Food" >
		<id property="idx" column="IDX"/>
		<result property="uId" column="U_ID"/>
		<result property="tp" column="TP"/>
		<result property="wdt" column="WDT"/>
		<result property="jidx" column="JIDX"/>
		<result property="area" column="AREA"/>
		<result property="edt" column="EDT"/>
		<result property="fnm" column="FNM"/>
		<result property="bdt" column="BDT"/>
		<result property="fdt" column="FDT"/>
		<result property="vm" column="VM"/>
		<result property="price" column="PRICE"/>
		<result property="sort" column="SORT"/>
		<result property="chk" column="CHK"/>
	</resultMap>
	
		<select id="frFind" parameterType="Food" resultType="String">
	select DISTINCT(TP) from food where u_id=#{uId}
	</select>
	
	<!-- 최초 냉장고 타입 생성 -->
		<insert id="insertType" parameterType="Food">
		INSERT INTO FOOD VALUES(FD_SEQ.NEXTVAL,#{uId},#{cd}, SYSDATE)
	</insert>
	
	<!-- 냉장고 음식 리스트 -->
	<select id="selectFr" parameterType="Food" resultMap="foodResultSet">
		SELECT B.TP,A.*  FROM FOOD_L A
		LEFT JOIN FOOD B ON A.JIDX=B.IDX
		WHERE B.U_ID=#{uId}
	</select>
	
	<select id="frJidx" parameterType="Food" resultType="int">
	select idx from food where u_id=#{uId}
	</select>
	
	<!-- 음식 저장  안돼-->
		<insert id="fr01Insert" parameterType="Food">
		INSERT INTO FOOD_L VALUES(FDL_SEQ.NEXTVAL, #{jidx}, #{area}, SYSDATE, SYSDATE,
		#{fnm}, #{bdt},#{fdt}, #{vm}, #{price}, '0', '0')
		
	</insert>
	
</mapper>